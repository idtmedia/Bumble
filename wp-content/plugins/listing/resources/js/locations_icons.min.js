!function(a){"use strict";var e;a(function(){var i=locations_icons.locations_icons_url;a(document).on("click",".select_icon_image",function(){e=a(this).parent().find(".icon_image");a('<div id="select_field_icon_dialog"></div>').dialog({width:.5*a(window).width(),height:.8*a(window).height(),modal:!0,resizable:!1,draggable:!1,title:locations_icons.ajax_dialog_title,open:function(){alsp_ajax_loader_show(),a.ajax({type:"POST",url:alsp_js_objects.ajaxurl,data:{action:"alsp_select_location_icon_dialog"},dataType:"html",success:function(i){0!=i&&(a("#select_field_icon_dialog").html(i),e.val()&&a(".alsp-map-icon[icon_file='"+e.val()+"']").addClass("alsp-selected-icon"))},complete:function(){alsp_ajax_loader_hide()}}),a(document).on("click",".ui-widget-overlay",function(){a("#select_field_icon_dialog").remove()})},close:function(){a("#select_field_icon_dialog").remove()}})}),a(document).on("click",".alsp-map-icon",function(){e=a(this).parent().find(".icon_image"),a(".alsp-selected-icon").removeClass("alsp-selected-icon");var o=a(this).attr("icon_file");alsp_ajax_loader_show(),a.ajax({type:"POST",url:alsp_js_objects.ajaxurl,data:{action:"alsp_select_location_icon",icon_file:o,location_id:e.parent().find(".location_id").val()},dataType:"html",success:function(a){0!=a&&e&&(e.val(o),e.parent().find(".icon_image_tag").attr("src",i+o).show(),e=!1)},complete:function(){a(this).addClass("alsp-selected-icon"),a("#select_field_icon_dialog").remove(),alsp_ajax_loader_hide()}})}),a(document).on("click","#reset_icon",function(){a(".alsp-selected-icon").removeClass("alsp-selected-icon"),alsp_ajax_loader_show(),a.ajax({type:"POST",url:alsp_js_objects.ajaxurl,data:{action:"alsp_select_location_icon",location_id:e.parent().find(".location_id").val()},dataType:"html",success:function(a){e&&(e.val(""),e.parent().find(".icon_image_tag").attr("src","").hide(),e=!1)},complete:function(){a("#select_field_icon_dialog").remove(),alsp_ajax_loader_hide()}})})})}(jQuery);